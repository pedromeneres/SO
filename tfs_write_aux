ssize_t tfs_write_aux(int fhandle, void const *buffer, size_t to_write, inode_t *inode, open_file_entry_t *file){

	/*cursor declaration*/
	int cursor = 0;
	int big_file_index = 0;

	/*Alloc a new data block to store the other indexes that this file will need to have*/
	if(inode->last_written_index == 11){
		/*This data block is diferent and it will be stored inside the fs_data structure*/
		inode->i_data_block[MAX_BLOCK_DATA + 1] = data_block_alloc();
	}
	/*Now we get it*/
	void *block = data_block_get(inode->i_data_block[MAX_BLOCK_DATA + 1]);
	while(to_write > 0){
		/*Now we get to work*/

		if(file->of_offset == 0){
			/*Alloc a new data block for next index in i_data_block*/
			big_file_index++;
			block += big_file_index;
			void *block = data_block_alloc();
		}

		/*if to_write doesn't fit inside the block*/
		if(to_write > BLOCK_SIZE){

			to_write -= BLOCK_SIZE;

			void *block =

			memcpy(block + file->of_offset, buffer + (cursor * BLOCK_SIZE), BLOCK_SIZE);

			/*Data block is full. Act accordingly*/
			file->of_offset = 0;
			inode->i_size++;
			cursor++;

			/*Increment last_written_index*/
			inode->last_written_index++;


			continue;

		}

		void *block = data_block_get(inode->i_data_block[inode->last_written_index]);
		memcpy(block + file->of_offset, buffer + (BLOCK_SIZE * cursor), to_write);

		file->of_offset += to_write;
        if (file->of_offset > inode->i_size) {
            inode->i_size = file->of_offset;
        }
		/*Increment last_written_index*/
		if(to_write == BLOCK_SIZE){
			inode->last_written_index++;
			file->of_offset = 0;
		}
		break;
	}
	return (ssize_t)to_write;
}